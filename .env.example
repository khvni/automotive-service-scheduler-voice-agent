# ============================================================================
# ENVIRONMENT CONFIGURATION
# ============================================================================
# Copy this file to .env and fill in your actual values
# For local development: Use localhost/ngrok URLs
# For production: Use your deployed domain
# ============================================================================

# ----------------------------------------------------------------------------
# Application Environment
# ----------------------------------------------------------------------------
# Options: development, production
APP_ENV=development
DEBUG=true
LOG_LEVEL=INFO

# ----------------------------------------------------------------------------
# Server Configuration
# ----------------------------------------------------------------------------
HOST=0.0.0.0
PORT=8000

# CORS Origins (comma-separated URLs)
# Local: ["http://localhost:3000", "http://localhost:8000"]
# Production: ["https://yourdomain.com"]
CORS_ORIGINS=["http://localhost:3000", "http://localhost:8000"]

# ----------------------------------------------------------------------------
# Base URL Configuration
# ----------------------------------------------------------------------------
# LOCAL DEVELOPMENT: Use ngrok URL (e.g., https://abc123.ngrok.io)
# PRODUCTION: Use your deployed domain (e.g., https://yourdomain.com)
# Important: NO trailing slash
BASE_URL=https://your-ngrok-url.ngrok.io

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------
# LOCAL: postgresql+asyncpg://user:pass@localhost:5432/automotive_voice  # pragma: allowlist secret
# NEON: postgresql+asyncpg://user:pass@host.neon.tech/automotive_voice?sslmode=require  # pragma: allowlist secret
# RENDER: Provided automatically as DATABASE_URL (internal connection string)
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/automotive_scheduler  # pragma: allowlist secret

# ----------------------------------------------------------------------------
# Redis Configuration
# ----------------------------------------------------------------------------
# LOCAL: redis://localhost:6379/0
# UPSTASH: rediss://default:password@host.upstash.io:6379  # pragma: allowlist secret
# RENDER: Provided automatically as REDIS_URL (internal connection string)
REDIS_URL=redis://localhost:6379/0
REDIS_SESSION_TTL=3600

# ----------------------------------------------------------------------------
# Twilio Configuration
# ----------------------------------------------------------------------------
# Get credentials from: https://console.twilio.com/
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx  # pragma: allowlist secret
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+15551234567

# Webhook URL (deprecated - use BASE_URL instead)
# Will be automatically constructed as: {BASE_URL}/api/v1/webhooks/incoming-call
TWILIO_WEBHOOK_URL=https://your-domain.com

# ----------------------------------------------------------------------------
# Deepgram Configuration (STT + TTS)
# ----------------------------------------------------------------------------
# Get API key from: https://console.deepgram.com/
DEEPGRAM_API_KEY=your_deepgram_api_key

# STT Configuration
DEEPGRAM_MODEL=nova-2-phonecall
DEEPGRAM_LANGUAGE=en
DEEPGRAM_ENCODING=mulaw
DEEPGRAM_SAMPLE_RATE=8000
DEEPGRAM_CHANNELS=1
DEEPGRAM_INTERIM_RESULTS=true
DEEPGRAM_SMART_FORMAT=true
DEEPGRAM_ENDPOINTING=300
DEEPGRAM_UTTERANCE_END_MS=1000

# TTS Configuration
# Voice options: aura-2-asteria-en (female), aura-2-orpheus-en (male), aura-2-arcas-en (male)
DEEPGRAM_TTS_MODEL=aura-2-asteria-en
DEEPGRAM_TTS_ENCODING=mulaw
DEEPGRAM_TTS_SAMPLE_RATE=8000

# ----------------------------------------------------------------------------
# OpenAI Configuration
# ----------------------------------------------------------------------------
# Get API key from: https://platform.openai.com/api-keys
# Using Chat Completions API with function calling (NOT Realtime API)
OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxx
OPENAI_MODEL=gpt-4o
OPENAI_TEMPERATURE=0.8
OPENAI_MAX_TOKENS=1000
OPENAI_VOICE=alloy

# ----------------------------------------------------------------------------
# ElevenLabs Configuration (Optional - Alternative TTS)
# ----------------------------------------------------------------------------
# Get API key from: https://elevenlabs.io/
# ELEVENLABS_API_KEY=your_elevenlabs_api_key
# ELEVENLABS_VOICE_ID=your_voice_id

# ----------------------------------------------------------------------------
# Google Calendar Configuration (OAuth2)
# ----------------------------------------------------------------------------
# Setup Instructions:
# 1. Go to https://console.cloud.google.com/
# 2. Create a new project or select existing
# 3. Enable Google Calendar API
# 4. Create OAuth 2.0 Client ID credentials
#    - Application type: Web application
#    - Authorized redirect URIs: http://localhost:8080
# 5. Download credentials JSON
# 6. Generate refresh token using OAuth2 flow (one-time setup)
#    - Run: python scripts/generate_google_refresh_token.py
# 7. Copy Client ID, Client Secret, and Refresh Token below
GOOGLE_CLIENT_ID=your_client_id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_client_secret
GOOGLE_REFRESH_TOKEN=your_refresh_token
CALENDAR_TIMEZONE=America/New_York

# ----------------------------------------------------------------------------
# NHTSA VIN API (No API key required)
# ----------------------------------------------------------------------------
NHTSA_API_URL=https://vpic.nhtsa.dot.gov/api

# ----------------------------------------------------------------------------
# Business Configuration
# ----------------------------------------------------------------------------
SERVICE_CENTER_NAME="Otto's Auto"
SERVICE_CENTER_HOURS=Monday-Friday 8AM-6PM, Saturday 9AM-4PM
DEFAULT_APPOINTMENT_DURATION=60

# ----------------------------------------------------------------------------
# Worker Configuration (Background Jobs)
# ----------------------------------------------------------------------------
# Cron schedule for reminder calls (default: 9 AM daily)
# Format: minute hour day month day_of_week
# Examples:
#   "0 9 * * *"     = 9 AM daily
#   "0 18 * * *"    = 6 PM daily
#   "*/30 * * * *"  = Every 30 minutes (testing only)
REMINDER_CRON_SCHEDULE=0 9 * * *
REMINDER_DAYS_BEFORE=1

# Worker Timezone
WORKER_REMINDER_TIMEZONE=America/Chicago

# Server API URL for worker
# LOCAL: http://localhost:8000/api/v1
# PRODUCTION: https://yourdomain.com/api/v1
SERVER_API_URL=http://localhost:8000/api/v1

# ----------------------------------------------------------------------------
# POC SAFETY FEATURE (Remove in production!)
# ----------------------------------------------------------------------------
# Restrict ALL outbound calls to this number only during testing
# Format: E.164 (+1XXXXXXXXXX)
# IMPORTANT: Comment out or remove this line before production deployment
YOUR_TEST_NUMBER=+15555555555

# ----------------------------------------------------------------------------
# Local Development Tools
# ----------------------------------------------------------------------------
# Ngrok Configuration (for local development only)
# Get auth token from: https://dashboard.ngrok.com/get-started/your-authtoken
NGROK_AUTHTOKEN=your_ngrok_auth_token

# ============================================================================
# PLATFORM-SPECIFIC EXAMPLES
# ============================================================================

# ----------------------------------------------------------------------------
# Example: Render Deployment
# ----------------------------------------------------------------------------
# Most values are the same, but use Render-provided URLs:
#
# APP_ENV=production
# DEBUG=false
# BASE_URL=https://your-app-name.onrender.com
# DATABASE_URL=[Render provides this automatically]
# REDIS_URL=[Render provides this automatically]
# SERVER_API_URL=https://your-app-name.onrender.com/api/v1
# CORS_ORIGINS=["https://your-app-name.onrender.com"]
# Remove or comment out: YOUR_TEST_NUMBER

# ----------------------------------------------------------------------------
# Example: Railway Deployment
# ----------------------------------------------------------------------------
# APP_ENV=production
# DEBUG=false
# BASE_URL=https://your-app.railway.app
# DATABASE_URL=[Railway provides this automatically]
# REDIS_URL=[Railway provides this automatically]
# SERVER_API_URL=https://your-app.railway.app/api/v1
# CORS_ORIGINS=["https://your-app.railway.app"]
# Remove or comment out: YOUR_TEST_NUMBER

# ----------------------------------------------------------------------------
# Example: Fly.io Deployment
# ----------------------------------------------------------------------------
# APP_ENV=production
# DEBUG=false
# BASE_URL=https://your-app.fly.dev
# DATABASE_URL=[Configure via fly secrets]
# REDIS_URL=[Configure via fly secrets]
# SERVER_API_URL=https://your-app.fly.dev/api/v1
# CORS_ORIGINS=["https://your-app.fly.dev"]
# Remove or comment out: YOUR_TEST_NUMBER

# ----------------------------------------------------------------------------
# Example: VPS/Docker Deployment
# ----------------------------------------------------------------------------
# APP_ENV=production
# DEBUG=false
# BASE_URL=https://voice.yourdomain.com
# DATABASE_URL=postgresql+asyncpg://user:pass@postgres:5432/automotive_voice
# REDIS_URL=redis://redis:6379/0
# SERVER_API_URL=https://voice.yourdomain.com/api/v1
# CORS_ORIGINS=["https://voice.yourdomain.com"]
# Remove or comment out: YOUR_TEST_NUMBER
